<!-- Libraries -->
<script type="text/javascript" src="<?php echo $this->basePath; ?>static/javascript/libraries/highcharts/highcharts.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>static/javascript/libraries/json2.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>static/javascript/libraries/namespacedotjs/Namespace.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>static/javascript/libraries/json-template.min.js"></script>

<script type="text/javascript" src="<?php echo $this->basePath; ?>static/javascript/frontend/CubeVizIndex.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>static/javascript/frontend/CubeVizChartSelection.js"></script>

<style type="text/css">
    @import url("<?php echo $this->basePath; ?>static/css/main.css");
</style>

<script>
    /*************************************
     * Importing Server-Side System Info *
     *************************************/
    Namespacedotjs.baseUri = <?php echo json_encode($this->basePath . 'static/javascript/frontend/'); ?>;

    var CubeViz_Links_Index = <?php echo $this->links; ?>;
    
    // choose default config for the start
    var CubeViz_Link_Chosen_Index = <?php echo json_encode($this->linkCode); ?>;
		    
    var CubeViz_Parameters_Index = {
	    sparqlEndpoint: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["sparqlEndpoint"],
	    selectedGraph: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedGraph"],
	    selectedDSD: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedDSD"],
	    selectedDS: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedDS"],
	    selectedMeasures: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedMeasures"],
	    selectedDimensions: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedDimensions"],
	    selectedDimensionComponents: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedDimensionComponents"],
	    modelUrl: "<?php echo $this->modelUrl; ?>",
	    cubevizPath: <?php echo json_encode($this->cubevizPath); ?>,
	    cubevizImagesPath: "<?php echo $this->basePath_images; ?>",
	    backend: <?php echo json_encode($this->backend); ?>,
	    chartType: CubeViz_Links_Index[CubeViz_Link_Chosen_Index]["selectedChartType"],
	    visualizationContainer: "container"
    }
    
    
    /**
     * TODO: ADAPT THIS! Its still a simple hack
     * It needs to read dynamicly
     */
    CubeViz_Parameters_Index.chartType = "bar";
    
    // Examples for a raw output from the backend
    var rawData = {
        "observation1": {
            "year": "April",
            "country": "Cubeviz",
            "indicator": "Wasting time due misunderstandings in communication :-P",
            "measure": 3
        },
        "observation2": {
            "year": "May",
            "country": "Cubeviz",
            "indicator": "Wasting time due misunderstandings in communication :-P",
            "measure": 5
        },
        "observation3": {
            "year": "June",
            "country": "Cubeviz",
            "indicator": "Wasting time due misunderstandings in communication :-P",
            "measure": 20
        }
    };
    
    var dimensions = ["country", "indicator", "year"];
    
    var measures = ["measure"];
    
    // var chartType = "pie"; // pie, bar
    
    // !!!
    // for detailed overview about the configuration of the chart 
    // look into CubeVizIndex.js
    // !!!
    
</script>

<div id="wrapper">
    <div id="container"></div>
    <div id="chart-selection"></div>
</div>
