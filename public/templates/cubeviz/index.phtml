<?php 
    require_once ('extensions/cubeviz/public/jsontemplates/ChartSelectorTemplates.phtml'); 
    require_once ('extensions/cubeviz/public/jsontemplates/Visualization_CubeViz_Templates.phtml'); 
?>

<script>
    /**
     * Contains loaded configuration for given hashcode
     * default is "default" configuration
     */
    var CubeViz_Links_Module = CubeViz_Links_Module || <?php echo $this->linkConfiguration; ?>;
	
    CubeViz_Links_Module ["linkCode"] = CubeViz_Links_Module ["linkCode"] || <?php echo json_encode($this->linkCode); ?>; 
    CubeViz_Links_Module ["backend"] = CubeViz_Links_Module ["backend"] || <?php echo json_encode($this->backendName); ?>;
    CubeViz_Links_Module ["cubevizPath"] = CubeViz_Links_Module ["cubevizPath"] || <?php echo json_encode($this->cubevizUrl); ?>;		
    CubeViz_Links_Module ["modelUrl"] = CubeViz_Links_Module ["modelUrl"] || "<?php echo $this->modelUrl; ?>";		
	CubeViz_Links_Module ["sparqlEndpoint"] = CubeViz_Links_Module ["sparqlEndpoint"] || "local"; 
	
    /**
     * Contains system information related only to CubeViz
     */
    var CubeViz_Config = {
        "context": "development",   // possible: development, production
        "imagesPath": <?php echo json_encode($this->cubevizImagesPath); ?>
    };
    
    var cubeVizUIChartConfig = <?php echo $this->cubeVizUIChartConfig; ?>; 
</script>


<!-- 
    Chart rendering area 
-->
<div id="wrapper-index" scrolling="no">
    <h2>
        CubeViz - Visualization of the <?php echo $this->modelTitle; ?>
        &nbsp;
        <img id="cubeviz-Index-questionMarkHeadline" class="cubeviz-icon-small" src="<?php echo $this->cubevizImagesPath; ?>questionmark.png" title="<?php echo $this->_translate->_('Click for more information'); ?>"/>
    </h2>
    <div id="container"></div>
    <div id="chartSelection" scrolling="no"></div>
</div>


<!-- 
    Chart Selection menu 
-->
<div id="chartSelectionMenu" lastSelection="0">
    <div id="chartSelectionMenuHeader">
        Configure the visualization
        <img src="<?php echo $this->cubevizImagesPath; ?>grayCross.png" id="chartSelectionMenuCloseCross"/>
    </div>
    <div id="chartSelectionMenuContent"></div>
</div>
<img id="chartSelectionMenuDongle" title="Click to open the menu"/>

<!-- File with dialogs -->
<?php require_once ('extensions/cubeviz/public/templates/cubeviz/indexDialogs.phtml'); ?>
