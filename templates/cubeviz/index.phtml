<script type="text/javascript" src="<?php echo $this->basePath; ?>libraries/json2.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>javascript/main.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>libraries/namespacedotjs/Namespace.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath; ?>javascript/json-template.min.js"></script>

<?php if ( true == $this->isModelSelected ): ?>
<script type="text/javascript" src="<?php echo $this->basePath; ?>javascript/index.js"></script>
<?php endif; ?>

<script type="text/javascript">
    
	/*************************************
	 * Importing Server-Side System Info *
	 *************************************/
	Namespace.baseUri = <?php echo json_encode($this->basePath . 'javascript/'); ?>;
	
	var cubevizParameters = {
		sparqlEndpoint: <?php echo json_encode($this->sparqlEndpoint); ?>,
		selectedGraph: <?php echo json_encode($this->selectedGraph); ?>,
		selectedDSD: <?php echo json_encode($this->selectedDSD); ?>,
		selectedDS: <?php echo json_encode($this->selectedDS); ?>,
		selectedMeasures: <?php echo json_encode($this->selectedMeasures); ?>,
		selectedDimensions: <?php echo json_encode($this->selectedDimensions); ?>,
		selectedDimensionComponents: <?php echo json_encode($this->selectedDimensionComponents); ?>,
		modelUri: "<?php echo $this->modelUri; ?>",
		cubevizPath: <?php echo json_encode($this->cubevizPath); ?>,
		backend: <?php echo json_encode($this->backend); ?>,
		chartType: <?php echo json_encode($this->chartType); ?>
	}
	
</script>

<!-- Include index json-templates for instance the dialogs. -->
<?php include ("extensions/cubeviz/templates/cubeviz/indexTemplates.phtml"); ?>

<style type="text/css">
	@import url("<?php echo $this->basePath; ?>css/main.css");
</style>

<div id="wrapper">

	<div id="content-wrapper">
		
		<!-- If model is not selected does not show left data selection bar
			 nor render the contents -->
		<?php if ( true == $this->isModelSelected ): ?>
        
            <div id="content">
                <?php if(isset($this->chart)): ?>
                    <?php echo $this->chart; ?>
                <?php else: ?>
                    <? if(!isset($this->parser)): ?>
                    <i><?php echo $this->_('info chart display selection first'); ?></i>
                    <? else: ?>
                    <i><?php echo $this->_('info chart type change'); ?></i>
                    <? endif; ?>
                <?php endif;?>
            </div>
        
        <?php else: ?> 
        
            <div id="content">
                <script type="text/javascript">
                    $(function() {
                        Namespace.include('org.aksw.cubeViz.Index.Main');
                        $("#sidebar-left-arrow").hide ();
                        org.aksw.cubeViz.Index.Main.loadPage ('startNoModelGiven');
                    });
                </script>
            </div>
        
        <?php endif; ?>
        
        <div id="site-overlay">&nbsp;</div>
        
	</div>
</div>

<!-- If model is not selected does not charts icon set-->
<?php if ( true == $this->isModelSelected ): ?>
<div id="chart-selection">
    <div id="chart-selection-container">
        <!-- If you add new chart option, please, redefine org.aksw.cubeViz.Index.Main.availableChartTypes
             in index.js file-->
        <img id="chart-selection-bar" src="<?php echo $this->basePath; ?>images/bars.png"/>
        <img id="chart-selection-line" src="<?php echo $this->basePath; ?>images/lines.png"/>
        <img id="chart-selection-area" src="<?php echo $this->basePath; ?>images/areas.png"/>
        <img id="chart-selection-splines" src="<?php echo $this->basePath; ?>images/splines.png"/>
        <img id="chart-selection-table" src="<?php echo $this->basePath; ?>images/table.png"/>
        <input type="hidden" id="chart-selection-selected-chart" value="bars">
    </div>
</div>
<?php endif; ?>
